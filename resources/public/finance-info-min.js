var focused_btn="#btn-a";function btn_focus(a){if(a!=focused_btn){$(focused_btn).removeClass("btn-success");$(focused_btn).addClass("btn-primary");$(a).addClass("btn-success");focused_btn=a}}$("#btn-a").click(function(){btn_focus("#btn-a");$("#panel-a").show(300);$("#chart1, #chart2, #chart3").hide(300)});$("#btn-b").click(function(){btn_focus("#btn-b");$("#chart1").show(300);$("#panel-a, #chart2, #chart3").hide(300)});$("#btn-c").click(function(){btn_focus("#btn-c");$("#chart2").show(300);$("#panel-a, #chart1, #chart3").hide(300)});$("#btn-d").click(function(){btn_focus("#btn-d");$("#chart3").show(300);$("#panel-a, #chart1, #chart2").hide(100)});function validate(a){if(a.password.value=="1611"){$("#btn-a, #btn-b, #btn-c, #btn-d").show(300);$("#panel-a").show(300);$("#tbn-a").removeClass("btn-primary");$("#btn-a").addClass("btn-success")}else{alert("Invalid password!")}a.password.value=""}Highcharts.setOptions({lang:{thousandsSep:","}});$(document).ready(function(){$("#btn-a, #btn-b, #btn-c, #btn-d").hide();$("#panel-a, #chart1, #chart2, #chart3").hide();$.getJSON("https://raw.githubusercontent.com/Hohyun/weekly-info/master/resources/public/offering_data.json",function(c){$.each(c,function(d,e){if(d=="date"){$("#asOfDate").text(e)}else{if(d=="w-general"){$("#w-general").text(accounting.formatNumber(e))}else{if(d=="m-general"){$("#m-general").text(accounting.formatNumber(e))}else{if(d=="y-general"){$("#y-general").text(accounting.formatNumber(e))}else{if(d=="w-mission"){$("#w-mission").text(accounting.formatNumber(e))}else{if(d=="m-mission"){$("#m-mission").text(accounting.formatNumber(e))}else{if(d=="y-mission"){$("#y-mission").text(accounting.formatNumber(e))}else{if(d=="w-special"){$("#w-special").text(accounting.formatNumber(e))}else{if(d=="m-special"){$("#m-special").text(accounting.formatNumber(e))}else{if(d=="y-special"){$("#y-special").text(accounting.formatNumber(e))}else{if(d=="w-total"){$("#w-total").text(accounting.formatNumber(e))}else{if(d=="m-total"){$("#m-total").text(accounting.formatNumber(e))}else{if(d=="y-total"){$("#y-total").text(accounting.formatNumber(e))}}}}}}}}}}}}}})});var b={chart:{renderTo:"chart1",defaultSeriesType:"areaspline"},title:{text:"Offerings status over time"},subtitle:{text:"Monthly offering trend since 2015.1"},xAxis:{type:"datetime"},yAxis:{title:{text:"Offerings"}},plotOptions:{series:{marker:{enabled:false}},areaspline:{stacking:"normal",fillOpacity:0.5,lineWidth:1}},credits:{text:"IIBC Treasury"},tooltip:{shared:true,crosshairs:true},series:[]};$.get("https://raw.githubusercontent.com/Hohyun/weekly-info/master/resources/public/offering_trend.csv",function(d){var c=d.split("\n");$.each(c,function(i,f){var g=f.split(",");var h=new Date(g[0]);if(i==0){$.each(g,function(l,k){if(l!=0){var j={name:k,data:[]};if(l>3){j.type="spline"}b.series.push(j)}})}if(i!=0){$.each(g,function(k,j){if(k!=0){b.series[k-1].data.push([h.getTime(),parseInt(j)])}})}});var e=new Highcharts.Chart(b)});var a={chart:{renderTo:"chart2",type:"column"},title:{text:"Offerings and expenses over time"},subtitle:{text:"offerings vs expenses vs net (this year)"},xAxis:{categories:[]},yAxis:{title:{text:"Amount"}},plotOptions:{series:{marker:{enabled:false}}},credits:{text:"IIBC Treasury"},tooltip:{shared:true,crosshairs:true},series:[]};$.get("https://raw.githubusercontent.com/Hohyun/weekly-info/master/resources/public/income_spending.csv",function(d){var c=d.split("\n");$.each(c,function(i,f){var g=f.split(",");var h=new Date(g[0]);if(i==0){$.each(g,function(l,k){if(l!=0){var j={name:k,data:[]};a.series.push(j)}})}if(i!=0){$.each(g,function(k,j){if(k==0){a.xAxis.categories.push(j)}else{a.series[k-1].data.push(parseInt(j))}})}});var e=new Highcharts.Chart(a)});options3={chart:{renderTo:"chart3",type:"pie"},title:{text:"Expenses by categories"},subtitle:{text:"Click the slice to view subcategories of others."},plotOptions:{series:{dataLabels:{enabled:true,format:"{point.name}: {point.y:,.0f}"}}},credits:{text:"IIBC Treasury"},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.p:.1f}%</b> of total<br/>'},series:[{name:"Categories",colorByPoint:true,data:[]}],drilldown:{series:[{name:"Others",id:"Others",data:[]}]}};$.get("https://raw.githubusercontent.com/Hohyun/weekly-info/master/resources/public/expense.csv",function(e){var d=e.split("\n");var c=false;$.each(d,function(j,g){var i=g.split(",");if(j==0){options3.subtitle.text=i[3]+", "+options3.subtitle.text}if(j!=0&&g!=""){if(!c){var h={name:i[0],y:parseInt(i[1]),p:parseFloat(i[2])};if(i[0]=="Others"){h.drilldown="Others";h.sliced=true;c=true}options3.series[0].data.push(h)}else{options3.drilldown.series[0].data.push([i[0],parseInt(i[1])])}}});var f=new Highcharts.Chart(options3)})});